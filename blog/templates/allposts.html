{% extends "layout.html" %}
{% block content %}
<h2>All blog posts</h2>

<p>
  <button id="sort-newest-first" type="button" class="btn btn-secondary">Newest first</button>
  <button id="sort-oldest-first" type="button" class="btn btn-outline-secondary">Oldest first</button>
</p>

<table class="table" id="all-posts">
  <tbody>
    {% for post in posts %}
    <tr>
      <td>
        <em><a href="{{ '/post/' + post[0].url }}">{{ post[0].title }}</a></em>
      </td>
      <td class="created-at">
        {{ post[0].createdAt }}
      </td>
      <td>
        {{ post[0].comments | length }} comment(s)
      </td>
      <td>
        {% if post.avg_rating %}{{ "%.1f" | format(post.avg_rating) }}{% else %}-{% endif %}/10
      </td>
    </tr>
      {% endfor %}
  </tbody>
</table>
{% endblock content %}
